# LLM Memory Module

## 概述

LLM Memory 模块是一个探索性库，旨在通过图节点群和小参数大模型的结合，为大参数大模型的复杂任务提供记忆支持。该模块实现了一个智能记忆系统，能够存储、组织和检索知识，以增强大语言模型的长期记忆能力。

## 核心理念

### 问题背景
- 大参数大模型（如GPT-4、Claude等）虽然能力强大，但缺乏持久化记忆
- 上下文窗口限制了可处理的信息量
- 需要一个智能的记忆系统来补充大模型的能力

### 解决方案
通过结合以下技术：
1. **图结构记忆网络** - 使用图数据结构表示知识间的复杂关系
2. **小参数模型辅助** - 使用轻量级模型进行记忆管理和检索
3. **向量化存储** - 通过向量嵌入实现语义相似性检索
4. **动态重要性评估** - 基于时间衰减和访问频率的记忆管理

## 架构设计

```
┌─────────────────────────────────────────────────────────────┐
│                    大参数大模型 (GPT-4/Claude)                │
│                                                             │
└─────────────────────┬───────────────────────────────────────┘
                      │ 查询/响应
                      │
┌─────────────────────▼───────────────────────────────────────┐
│              SmallModelMemoryAssistant                       │
│  ┌─────────────────┐    ┌─────────────────┐                │
│  │   查询分析      │    │   记忆检索      │                │
│  │   Query Analysis│    │  Memory Retrieval│               │
│  └─────────────────┘    └─────────────────┘                │
│  ┌─────────────────┐    ┌─────────────────┐                │
│  │   内容处理      │    │   记忆整理      │                │
│  │ Content Process │    │Memory Organization│               │
│  └─────────────────┘    └─────────────────┘                │
└─────────────────────┬───────────────────────────────────────┘
                      │
┌─────────────────────▼───────────────────────────────────────┐
│                   MemoryGraph                               │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐         │
│  │MemoryNode   │  │MemoryRelation│ │Graph Engine │         │
│  │- 内容       │  │- 关系类型    │  │- JGraphT   │         │
│  │- 向量嵌入   │  │- 强度权重    │  │- 图算法    │         │
│  │- 重要性     │  │- 时间衰减    │  │- 路径查找  │         │
│  │- 访问统计   │  └─────────────┘  └─────────────┘         │
│  └─────────────┘                                           │
└─────────────────────────────────────────────────────────────┘
```

## 核心组件

### 1. MemoryNode (记忆节点)
表示单个记忆单元，包含：
- **内容**: 存储的文本信息
- **向量嵌入**: 用于语义相似性检索的向量表示
- **重要性评分**: 动态计算的重要性指标
- **访问统计**: 记录访问频率和时间
- **标签系统**: 用于分类和组织

### 2. MemoryRelation (记忆关系)
表示记忆节点间的关系：
- **关系类型**: 语义、逻辑、层次、上下文等关系
- **强度权重**: 关系的重要性程度
- **时间衰减**: 基于时间的关系强度衰减
- **强化机制**: 通过重复访问加强关系

### 3. MemoryGraph (记忆图)
管理整个记忆网络：
- **图结构管理**: 使用JGraphT管理节点和边
- **相似性检索**: 基于向量嵌入的语义检索
- **邻居查找**: 基于图结构的关联记忆检索
- **记忆清理**: 自动清理低重要性的记忆

### 4. SmallModelMemoryAssistant (记忆助手)
智能记忆管理系统：
- **查询分析**: 分析用户查询的意图和复杂度
- **上下文生成**: 为大模型生成相关的记忆上下文
- **信息处理**: 处理新信息并更新记忆图
- **组织建议**: 提供记忆整理和优化建议

## 主要特性

### 🧠 智能记忆管理
- **动态重要性评估**: 基于访问频率、时间衰减和内容重要性
- **自动清理机制**: 定期清理低价值记忆，保持系统效率
- **关系强化**: 通过重复访问自动加强记忆间的关联

### 🔍 高效检索系统
- **语义相似性检索**: 基于向量嵌入的语义匹配
- **图结构遍历**: 利用关系网络发现相关记忆
- **多层次检索**: 支持直接匹配和关联推理

### 📊 分析和优化
- **记忆统计**: 提供详细的记忆网络分析
- **健康评分**: 评估记忆系统的整体状态
- **优化建议**: 智能建议记忆整理策略

### 🔧 灵活扩展
- **插件化架构**: 支持自定义嵌入服务和分析算法
- **多种存储后端**: 支持内存、文件、数据库等存储方式
- **可配置参数**: 灵活的配置选项适应不同场景

## 使用场景

### 1. 对话系统增强
为聊天机器人提供长期记忆能力，记住用户偏好和历史对话。

### 2. 知识库助手
构建智能知识库，支持复杂的知识检索和关联分析。

### 3. 代码助手
为编程助手程序记忆代码库结构、函数关系和开发历史。

### 4. 学习辅助系统
个性化学习助手，记录学习进度和知识掌握情况。

### 5. 决策支持系统
企业决策支持，记忆业务知识和历史决策案例。

## 技术栈

- **语言**: Kotlin 2.2.0
- **图计算**: JGraphT
- **向量计算**: ND4J/DL4J
- **序列化**: Kotlinx Serialization
- **并发**: Kotlin Coroutines
- **测试**: JUnit 5, MockK, Testcontainers

## 性能特点

### 内存效率
- 图结构的紧凑存储
- 延迟加载和缓存策略
- 自动清理低价值记忆

### 查询性能
- O(log n) 的向量相似性检索
- 图算法优化的关联查找
- 缓存热点记忆提升访问速度

### 扩展性
- 支持分布式存储
- 水平扩展的图分片
- 异步处理管道

## 未来发展方向

### 短期目标
1. **集成更多向量数据库** (Qdrant, Pinecone, Weaviate)
2. **优化图算法性能** 
3. **增加更多关系类型**
4. **完善测试覆盖率**

### 中期目标
1. **分布式记忆网络**
2. **多模态记忆支持** (图像、音频)
3. **联邦学习记忆共享**
4. **实时记忆更新**

### 长期愿景
1. **通用记忆协议标准**
2. **跨平台记忆互操作**
3. **认知架构整合**
4. **自主记忆演化**

## 贡献指南

我们欢迎社区贡献！请查看 [CONTRIBUTING.md](CONTRIBUTING.md) 了解详细信息。

## 许可证

本项目采用 MIT 许可证。详见 [LICENSE](LICENSE) 文件。

---

**注意**: 这是一个探索性项目，目标是验证图节点群和小参数模型结合的可行性。欢迎提供反馈和建议！